/* empty css             *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                    *//* empty css                 *//* empty css                *//* empty css                      *//* empty css                        *//* empty css                  *//* empty css                   */import{Y as v,d as H,r as i,a as R,Z as J,z as X,c as T,o as U,b as t,w as o,p as Y,q as g,$ as Z,a0 as K,j as Q,a1 as W,a2 as ee,X as ae,h as te,k as le,l as oe,ab as re,A as se,B as ne,a8 as de,F as ie,a7 as u,I as ue,_ as me}from"./index-DOPBV4cN.js";const pe=(n,b)=>v.get(`/admin/product/baseTrademark/${n}/${b}`),ce=n=>n.id?v.put("/admin/product/baseTrademark/update",n):v.post("/admin/product/baseTrademark/save",n),ge=n=>v.delete("/admin/product/baseTrademark/remove/"+n),fe=["src"],_e=["src"],ve=H({__name:"index",setup(n){const b=i(),m=i(),p=i(!1),d=i(1),y=i(3),x=i(0),f=i([]),a=R({tmName:"",logoUrl:""}),c=async(l=1)=>{d.value=l;let e=await pe(d.value,y.value);e.code==200&&(x.value=e.data.total,f.value=e.data.records,console.log(f))},C=()=>{c()};J(()=>{c()});const E=l=>l.type=="image/png"||l.type=="image/jpeg"||l.type=="image/gif"?l.size/1024/1024<4?!0:(u({type:"error",message:"上传文件大小小于4M"}),!1):(u({type:"error",message:"上传文件格式务必PNG|JPG|GIF"}),!1),z=(l,e)=>{console.log("upload success"),a.logoUrl=l.data,m.value.clearValidate("logoUrl")},V=async()=>{a.logoUrl==""&&(a.logoUrl=""),await m.value.validate(),(await ce(a)).code==200?(u({type:"success",message:a.id?"修改品牌成功":"添加品牌成功"}),c(a.id?d.value:1)):u({type:"error",message:a.id?"修改品牌失败":"添加品牌失败"}),k()},k=()=>{p.value=!1,a.id=0,a.tmName="",a.logoUrl=""},P=l=>{a.id=l.id,a.tmName=l.tmName,a.logoUrl=l.logoUrl,p.value=!0,ue(()=>{m.value.clearValidate("tmName"),m.value.clearValidate("logoUrl")})};async function w(l){(await ge(l)).code==200?(u({type:"success",message:"删除品牌成功"}),c(f.value.length>1?d.value:d.value-1)):u({type:"error",message:"删除品牌失败"})}const h={tmName:[{required:!0,trigger:"blur",validator:(l,e,s)=>{e.trim().length>=2?s():s(new Error("品牌名称位数大于等于两位"))}}],logoUrl:[{required:!0,validator:(l,e,s)=>{e?s():s(new Error("LOGO图片务必上传"))}}]},q=()=>{p.value=!0};return(l,e)=>{const s=Y,_=K,O=W,$=Z,A=ee,G=ae,I=oe,N=le,L=X("Plus"),M=ne,B=re,F=te,j=de;return U(),T(ie,null,[t(G,{class:"box-card"},{default:o(()=>[t(s,{type:"primary",size:"default",icon:"Plus",onClick:q},{default:o(()=>e[4]||(e[4]=[g("添加品牌")])),_:1}),t($,{ref_key:"table",ref:b,style:{margin:"10px 0px"},border:!0,data:f.value,stripe:!0,"highlight-current-row":!0},{default:o(()=>[t(_,{label:"序号",width:"80px",align:"center",type:"index"}),t(_,{label:"品牌名称",prop:"tmName"}),t(_,{label:"品牌LOGO"},{default:o(({row:r,$index:D})=>[Q("img",{src:r.logoUrl,alt:"",style:{width:"50px",height:"50px"}},null,8,fe)]),_:1}),t(_,{label:"品牌操作"},{default:o(({row:r,$index:D})=>[t(s,{size:"small",onClick:S=>P(r)},{default:o(()=>e[5]||(e[5]=[g("修改")])),_:2},1032,["onClick"]),t(O,{title:"Are you sure to delete this?",onConfirm:S=>w(r.id)},{reference:o(()=>[t(s,{size:"small"},{default:o(()=>e[6]||(e[6]=[g("Delete")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),t(A,{onCurrentChange:c,onSizeChange:C,"pager-count":9,"current-page":d.value,"onUpdate:currentPage":e[0]||(e[0]=r=>d.value=r),"page-size":y.value,"onUpdate:pageSize":e[1]||(e[1]=r=>y.value=r),"page-sizes":[3,5,7,9],background:!0,layout:" prev, pager, next, jumper,->,total, sizes,",total:x.value},null,8,["current-page","page-size","total"])]),_:1}),t(j,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=r=>p.value=r),title:a.id?"修改"+a.tmName:"新增",onClosed:k},{footer:o(()=>[t(s,{type:"primary",size:"default",onClick:k},{default:o(()=>e[7]||(e[7]=[g("取消")])),_:1}),t(s,{type:"primary",size:"default",onClick:V},{default:o(()=>e[8]||(e[8]=[g("确定")])),_:1})]),default:o(()=>[t(F,{style:{width:"80%"},ref_key:"formRef",ref:m,model:a,rules:h},{default:o(()=>[t(N,{label:"品牌名称","label-width":"100px",prop:"tmName"},{default:o(()=>[t(I,{placeholder:"请您输入品牌名称",modelValue:a.tmName,"onUpdate:modelValue":e[2]||(e[2]=r=>a.tmName=r)},null,8,["modelValue"])]),_:1}),t(N,{label:"品牌LOGO","label-width":"100px",prop:"logoUrl"},{default:o(()=>[t(B,{class:"avatar-uploader",action:"http://localhost:9000/product/baseTrademark/uploadPicture","show-file-list":!1,"on-success":z,"before-upload":E},{default:o(()=>[a.logoUrl?(U(),T("img",{key:0,src:a.logoUrl,class:"avatar"},null,8,_e)):(U(),se(M,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[t(L)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),qe=me(ve,[["__scopeId","data-v-6f6e0e7a"]]);export{qe as default};
