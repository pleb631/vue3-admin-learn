/* empty css             *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                   */import{Y as u,d as B,r as g,a as F,Z as T,c as U,o as j,b as l,w as t,a0 as w,p as z,q as r,x as A,a1 as D,i,$ as N,h as O,k as I,l as R,j as H,a5 as y,a8 as S,F as Y,a7 as V}from"./index-DOPBV4cN.js";const Z=()=>u.get("/admin/acl/permission"),G=d=>d.id?u.put("/admin/acl/permission/update",d):u.post("/admin/acl/permission/save",d),J=d=>u.delete("/admin/acl/permission/remove/"+d),K={class:"dialog-footer"},oe=B({__name:"index",setup(d){let c=g([]),o=g(!1),s=F({code:"",level:0,name:"",pid:0});T(()=>{f()});const f=async()=>{let n=await Z();n.code===200&&(c.value=n.data)},C=n=>{Object.assign(s,{id:0,code:"",level:0,name:"",pid:0}),o.value=!0,s.level=n.level+1,s.pid=n.id},k=n=>{o.value=!0,Object.assign(s,n)},x=async()=>{o.value=!1,(await G(s)).code===200&&(o.value=!1,V({type:"success",message:s.id?"更新成功":"添加成功"}),f())},E=async n=>{(await J(n)).code===200&&V({type:"success",message:"删除成功"})};return(n,e)=>{const p=w,m=z,P=D,$=N,_=R,v=I,q=O,M=S;return j(),U(Y,null,[l($,{style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"",data:i(c)},{default:t(()=>[l(p,{prop:"name",label:"名称"}),l(p,{prop:"code",label:"权限值"}),l(p,{prop:"updateTime",label:"修改时间","show-overflow-tooltip":""}),l(p,{label:"操作",width:"260px"},{default:t(({row:a,$index:L})=>[l(m,{size:"small",disabled:a.level===4,onClick:b=>C(a)},{default:t(()=>[r(A(a.level===3?"添加功能":"添加菜单"),1)]),_:2},1032,["disabled","onClick"]),l(m,{type:"primary",size:"small",disabled:a.level===1,onClick:b=>k(a)},{default:t(()=>e[4]||(e[4]=[r(" 编辑 ")])),_:2},1032,["disabled","onClick"]),l(P,{title:`你确定要删除${a.name}?`,width:"260px",onConfirm:b=>E(a.id)},{reference:t(()=>[l(m,{type:"danger",size:"small",disabled:a.level===1},{default:t(()=>e[5]||(e[5]=[r(" 删除 ")])),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),l(M,{modelValue:i(o),"onUpdate:modelValue":e[3]||(e[3]=a=>y(o)?o.value=a:o=a),title:i(s).id?"更新菜单":"添加菜单"},{footer:t(()=>[H("span",K,[l(m,{onClick:e[2]||(e[2]=a=>y(o)?o.value=!1:o=!1)},{default:t(()=>e[6]||(e[6]=[r("取消")])),_:1}),l(m,{type:"primary",onClick:x},{default:t(()=>e[7]||(e[7]=[r("确定")])),_:1})])]),default:t(()=>[l(q,null,{default:t(()=>[l(v,{label:"名称"},{default:t(()=>[l(_,{placeholder:"请你输入菜单的名称",modelValue:i(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>i(s).name=a)},null,8,["modelValue"])]),_:1}),l(v,{label:"权限"},{default:t(()=>[l(_,{placeholder:"请你输入权限数值",modelValue:i(s).code,"onUpdate:modelValue":e[1]||(e[1]=a=>i(s).code=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{oe as default};
