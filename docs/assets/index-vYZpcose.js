/* empty css             *//* empty css                *//* empty css                  *//* empty css                   *//* empty css                        *//* empty css               *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                 */import{Y as v,d as Q,r as f,Z as X,ah as Y,A as w,o as m,w as t,b as e,$ as Z,i as o,a0 as G,j as E,Q as J,p as K,a1 as O,a2 as W,a5 as h,a3 as ee,E as te,g as ae,q as r,x as y,c as z,F as N,y as V,ad as le,ai as se,aj as ne,X as oe,a7 as k}from"./index-BoODYjlk.js";const re=(u,s)=>v.get(`/admin/product/list/${u}/${s}`),ue=u=>v.get("/admin/product/onSale/"+u),ie=u=>v.get("/admin/product/cancelSale/"+u),pe=u=>v.get("/admin/product/getSkuInfo/"+u),de=u=>v.delete("/admin/product/deleteSku/"+u),me=["src"],ce=["src"],Ee=Q({__name:"index",setup(u){let s=f(1),g=f(10),D=f(0),C=f([]),x=f(!1),p=f({});const I=async i=>{x.value=!0;let a=await pe(i.id);p.value=a.data};X(()=>{c()});const c=async(i=1)=>{s.value=i;let a=await re(s.value,g.value);a.code==200&&(D.value=a.data.total,C.value=a.data.records)};function B(){c()}const A=()=>{k({type:"success",message:"程序员在努力的更新中...."})},L=async i=>{i.isSale==1?(await ie(i.id),k({type:"success",message:"下架成功"}),c(s.value)):(await ue(i.id),k({type:"success",message:"上架成功"}),c(s.value))},T=async i=>{(await de(i)).code===200?(k({type:"success",message:"删除成功"}),c(C.value.length>1?s.value:s.value-1)):k({type:"error",message:"系统数据不能删除"})};return(i,a)=>{const d=G,S=K,$=O,U=Z,j=W,n=ae,_=te,q=le,F=ne,P=se,R=ee,M=oe,H=Y("has");return m(),w(M,null,{default:t(()=>[e(U,{border:"",style:{margin:"10px 0px"},data:o(C)},{default:t(()=>[e(d,{type:"index",label:"序号",width:"80px"}),e(d,{prop:"skuName",label:"名称",width:"80px","show-overflow-tooltip":""}),e(d,{prop:"skuDesc",label:"描述",width:"300px","show-overflow-tooltip":""}),e(d,{label:"图片",width:"300px"},{default:t(({row:l,$index:b})=>[E("img",{src:l.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,me)]),_:1}),e(d,{label:"重量",width:"300px",prop:"weight"}),e(d,{label:"价格",width:"300px",prop:"price"}),e(d,{label:"操作",width:"300px",fixed:"right"},{default:t(({row:l})=>[J(e(S,{type:l.isSale==1?"info":"success",size:"small",icon:l.isSale==1?"Bottom":"Top",onClick:b=>L(l)},null,8,["type","icon","onClick"]),[[H,"btn.Sku.updown"]]),e(S,{type:"primary",size:"small",icon:"Edit",onClick:A}),e(S,{type:"primary",size:"small",icon:"InfoFilled",onClick:b=>I(l)},null,8,["onClick"]),e($,{title:`你确定要删除${l.skuName}?`,width:"200px",onConfirm:b=>T(l.id)},{reference:t(()=>[e(S,{type:"danger",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(j,{onSizeChange:B,onCurrentChange:c,"current-page":o(s),"onUpdate:currentPage":a[0]||(a[0]=l=>h(s)?s.value=l:s=l),"page-size":o(g),"onUpdate:pageSize":a[1]||(a[1]=l=>h(g)?g.value=l:g=l),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper, ->,sizes,total ",total:o(D)},null,8,["current-page","page-size","total"]),e(R,{modelValue:o(x),"onUpdate:modelValue":a[2]||(a[2]=l=>h(x)?x.value=l:x=l)},{header:t(()=>a[3]||(a[3]=[E("h4",null,"查看商品的详情",-1)])),default:t(()=>[e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[4]||(a[4]=[r("名称")])),_:1}),e(n,{span:18},{default:t(()=>[r(y(o(p).skuName),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[5]||(a[5]=[r("描述")])),_:1}),e(n,{span:18},{default:t(()=>[r(y(o(p).skuDesc),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[6]||(a[6]=[r("价格")])),_:1}),e(n,{span:18},{default:t(()=>[r(y(o(p).price),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[7]||(a[7]=[r("平台属性")])),_:1}),e(n,{span:18},{default:t(()=>[(m(!0),z(N,null,V(o(p).skuAttrValueList,l=>(m(),w(q,{style:{margin:"5px"},key:l.id},{default:t(()=>[r(y(l.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[8]||(a[8]=[r("销售属性")])),_:1}),e(n,{span:18},{default:t(()=>[(m(!0),z(N,null,V(o(p).skuSaleAttrValueList,l=>(m(),w(q,{style:{margin:"5px"},key:l.id},{default:t(()=>[r(y(l.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(n,{span:6},{default:t(()=>a[9]||(a[9]=[r("商品图片")])),_:1}),e(n,{span:18},{default:t(()=>[e(P,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(m(!0),z(N,null,V(o(p).skuImageList,l=>(m(),w(F,{key:l.id},{default:t(()=>[E("img",{src:l.imgUrl,style:{width:"100%",height:"100%"}},null,8,ce)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Ee as default};
